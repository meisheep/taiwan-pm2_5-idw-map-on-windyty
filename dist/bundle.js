!function(t){function i(n){if(a[n])return a[n].exports;var e=a[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var a={};i.m=t,i.c=a,i.d=function(t,a,n){i.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,a){a(1),t.exports=a(2)},function(t,i){window.map=window.W.maps;const a=document.createElement("script");a.src="https://pm25.lass-net.org/GIS/IDW/data.js",a.onload=function(){L.idwLayer(PM25points,{opacity:.5,maxZoom:16,minZoom:8,cellSize:10,exp:2,max:100}).addTo(map)},document.body.appendChild(a)},function(t,i){!function(){"use strict";function t(i){if(!(this instanceof t))return new t(i);this._canvas=i="string"==typeof i?document.getElementById(i):i,this._ctx=i.getContext("2d"),this._width=i.width,this._height=i.height,this._max=1,this._data=[]}t.prototype={defaultCellSize:25,defaultGradient:{0:"#ffffff",.11:"#9cff9c",.23:"#31ff00",.35:"#31cf00",.41:"#FFFF00",.47:"#FFCF00",.53:"#FF9A00",.58:"#FF6464",.64:"#FF0000",.7:"#990000",1:"#CE30FF"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},cellSize:function(t){var i=this._cell=document.createElement("canvas"),a=i.getContext("2d");return this._r=t,i.width=i.height=t,a.beginPath(),a.rect(0,0,t,t),a.fill(),a.closePath(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var i=document.createElement("canvas"),a=i.getContext("2d"),n=a.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var e in t)n.addColorStop(+e,t[e]);return a.fillStyle=n,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(t){this._cell||this.cellSize(this.defaultCellSize),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var a,n=0,e=this._data.length;n<e;n++)a=this._data[n],i.globalAlpha=a[2]/this._max,i.drawImage(this._cell,a[0]-this._r,a[1]-this._r);var s=i.getImageData(0,0,this._width,this._height);return this._colorize(s.data,this._grad,t),i.putImageData(s,0,0),this},_colorize:function(t,i,a){for(var n,e=0,s=t.length;e<s;e+=4)n=4*t[e+3],t[e]=i[n],t[e+1]=i[n+1],t[e+2]=i[n+2],t[e+3]=256*a}},window.simpleidw=t}(),L.IdwLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,i){this._latlngs=t,L.setOptions(this,i)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._idw&&this._updateOptions(),this.redraw()},redraw:function(){return!this._idw||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-idwmap-layer leaflet-layer"),i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[i]="50% 50%";var a=this._map.getSize();t.width=a.x,t.height=a.y;var n=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(n?"animated":"hide")),this._idw=simpleidw(t),this._updateOptions()},_updateOptions:function(){this._idw.cellSize(this.options.cellSize||this._idw.defaultCellSize),this.options.gradient&&this._idw.gradient(this.options.gradient),this.options.max&&this._idw.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var i=this._map.getSize();this._idw._width!==i.x&&(this._canvas.width=this._idw._width=i.x),this._idw._height!==i.y&&(this._canvas.height=this._idw._height=i.y),this._redraw()},_redraw:function(){if(this._map){var t,i,a,n,e=[],s=this._idw._r,o=this._map.getSize(),r=new L.Bounds(L.point([-s,-s]),o.add([s,s])),h=void 0===this.options.exp?1:this.options.exp,l=void 0===this.options.max?1:this.options.max,d=(void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,s/2),m=Math.ceil((r.max.x-r.min.x)/s)+1,c=Math.ceil((r.max.y-r.min.y)/s)+1;this._map._getMapPanePos();console.time("process "+this._latlngs.length);for(var _=map.containerPointToLatLng([0,0]),p=map.containerPointToLatLng([map.getSize().x,map.getSize().y]),f=111.32*Math.abs(_.lng-p.lng)*Math.cos(Math.PI*_.lat/180),f=111.32*Math.abs(_.lng-p.lng)/map.getSize().x,u=110.574*Math.abs(_.lat-p.lat)/map.getSize().y,g=new Array(c),w=new Array(c),v=0;v<c;v++){g[v]=new Array(m),w[v]=new Array(m);for(P=0;P<m;P++)g[v][P]=0,w[v][P]=0}for(n=0,len3=this._latlngs.length;n<len3;n++){var y=(S=this._map.latLngToContainerPoint(this._latlngs[n])).x-10/f,x=S.x+10/f,z=S.y-10/u,M=S.y+10/u;if(y=Math.round(y/s+.5),x=Math.ceil(x/s-.5),y<0&&(y=0),!(x<0||y>=m||(x>=m&&(x=m-1),z=Math.round(z/s+.5),M=Math.ceil(M/s-.5),z<0&&(z=0),M<0||z>=c))){M>=c&&(M=c-1);for(var P=y;P<=x;P++)for(v=z;v<=M;v++)if(!(w[v][P]<0)){var S=this._map.latLngToContainerPoint(this._latlngs[n]),C=L.point(P*s-d,v*s-d),F=C.distanceTo(S),O=(S.x-C.x)*f,T=(S.y-C.y)*u;if(!(Math.sqrt(O*O+T*T)>10)){var b,A=void 0!==this._latlngs[n].alt?this._latlngs[n].alt:void 0!==this._latlngs[n][2]?+this._latlngs[n][2]:1;0==F?(g[v][P]=A,w[v][P]=-1):(b=Math.pow(F,h),g[v][P]+=A/b,w[v][P]+=1/b)}}}}for(v=0,t=c;v<t;v++)for(P=0,a=m;P<a;P++)w[v][P]<0&&(w[v][P]=1),0==w[v][P]?interpolVal=0:interpolVal=g[v][P]/w[v][P],(i=[P*s,v*s,interpolVal])&&interpolVal&&e.push([Math.round(i[0]),Math.round(i[1]),Math.min(i[2],l)]);console.timeEnd("process "+this._latlngs.length),console.time("draw "+e.length),this._idw.data(e).draw(this.options.opacity),console.timeEnd("draw "+e.length),this._frame=null}},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._getCenterOffset(t.center)._multiplyBy(-i).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,a,i):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+" scale("+i+")"}}),L.idwLayer=function(t,i){return new L.IdwLayer(t,i)}}]);